<!DOCTYPE html>
<html lang="sl">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../favicon.ico" />

    <title>Igra Simon</title>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-toc.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/font-awesome.min.css" rel="stylesheet">

    <!-- Prism -->
    <link href="../css/prism.css" rel="stylesheet">

    <link href="../css/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

    <!-- Prism -->
    <script src="../js/prism.js"></script>

    <script>
    $(function(){
        $("#fritzing").scrollLeft(420);
    });
    </script>

</head>

<body>

    <div id="wrapper">

        <!-- Fixed navbar -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html"><img src="../img/malina.png"></a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">

            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Priprava <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../3101/index.html">Priprava strojne opreme</a></li>
                        <li><a href="../3102/index.html">Namestitev programske opreme</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="../3103/index.html">Uvod v fizično računalništvo</a></li>
                        <li><a href="../3104/index.html">Fizično računalništvo s pitonom</a></li>
                        <!--<li><a href="../3105/index.html">Fizično računalništvo z mačkom</a></li>-->
                    </ul>
                </li>
                <li><a href="../projects.html" title="Projekti"> Projekti</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li><a href="#license" title="Licenca" data-toggle="modal" data-target="#copyright"><span class="fa fa-creative-commons"></span> Licenca</a></li>
                    <li><a href="../colophon.html" title="Kolofon"><span class="fa fa-print"></span> Kolofon</a></li>
                    <li><a href="../tools.html" title="Orodja"><span class="fa fa-wrench"></span> Orodja</a></li>
                    <li><a href="mailto:eUcbenik@lusy.fri.uni-lj.si" title="Komentar"><span class="fa fa-commenting-o"></span> Komentar</a></li>
                    <li><a href="http://github.com/anzeljg/rpi/archive/v1.00.zip" title="Prenos"><span class="fa fa-download"></span> Prenos</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
        </nav>

        <!-- Modal (popup) window: License -->
        <div id="copyright" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Licenca</h4>
                    </div>
                    <div class="modal-body">
                        <p>To delo je na voljo pod pogoji slovenske licence Creative Commons 2.5:</p>
                        <p><strong>priznanje avtorstva - nekomercialno - deljenje pod enakimi pogoji.</strong></p>
                        <p align="justify">Celotna licenca je na voljo na spletu na naslovu <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/si/" target="_blank">http://creativecommons.org/licenses/by-nc-sa/2.5/si/</a>. V skladu s to licenco je dovoljeno vsakemu uporabniku delo razmnoževati, distribuirati, javno priobčevati, dajati v najem in tudi predelovati, vendar samo v nekomercialne namene in ob pogoju, da navede avtorja oziroma avtorje in izdajatelja tega dela. Če uporabnik delo predela, kar pomeni, da ga spremeni, preoblikuje, prevede ali uporabi to delo v svojem delu, lahko predelavo dela ponudi na voljo le pod pogoji, ki so enaki pogojem iz te licence oziroma pod enako licenco.</p>
                        <p><img src="../img/by-nc-sa.eu.png" height="35" border="0"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Zapri</button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-4">
<!-- Left column start -->
<nav id="toc" data-toggle="toc">
  <ul class="nav">
    <li><a href="index.html">Igra Simon</a></li>
    <li><a href="index1.html">Opis igre Simon</a></li>
    <li><a href="index2.html">Naključna števila</a></li>
    <li><a href="index3.html">Naključno zaporedje prižiganja diod</a></li>
    <li><a href="index4.html">Zvočni učinki, LED diode in gumbi</a></li>
    <li><a href="index5.html">4-številčni 7-segmentni prikazovalnik</a></li>
    <li class="active"><a href="index6.html">Igra Simon</a></li>
    <li><a href="summary.html">Povzetek</a></li>
    <li><a href="sources.html">Viri</a></li>
  </ul>
</nav>
<!-- Left column end -->
                    </div>
                    <div class="col-md-8">
                        <br />
<!-- Right column start -->
<h1>Igra Simon</h1>

<p align="justify">Zadnja naloga pri projektu igre Simon bo izdelava celotne delujoče igre Simon. To pomeni, da boš na preizkusno ploščico dodal/-a 4 LED diode (rdečo, modro, oranžno in zeleno), 4 gumbe in priklopil 4-številčni 7-segmentni prikazovalnik ter vse sprogramiral/-a tako, da boš lahko igral igro Simon.</p>

<div id="tabs">    
<ul class="nav nav-tabs">
  <li>&nbsp;&nbsp;&nbsp;</li>
  <li><a href="#pieces" data-toggle="tab">Sestavine</a></li>
  <li><a href="#build" data-toggle="tab">Navodila</a></li>
  <li class="active"><a href="#board" data-toggle="tab">Vezje</a></li>
  <li><a href="#scheme" data-toggle="tab">Shema</a></li>
  <li><a href="#python" data-toggle="tab">Koda</a></li>
</ul>

<div class="tab-content clearfix">

<!-- Pieces tab -->
<div class="tab-pane" id="pieces">
<div style="height:450px">
<h4>Strojna oprema</h4>
<ul>
  <li>1 Malina</li>
  <li>1 preizkusna ploščica (<i>angl. breadboard</i>)</li>
  <li>1 zatič oblike T s kablom (<i>angl. T-cobbler with breakout cable</i>)</li>
  <li>4 LED diode (rdeče, modre, oranžne in zelene barve)</li>
  <li>4 upori 330 Ω</li>
  <li>4 pritisni gumbi (<i>angl. tactile switch</i>)</li>
  <li>4 upori 10 kΩ</li>
  <li>1 komponenta TM1637/3642BH 4-številčni 7-segmentni prikazovalnik (<i>angl. 4-digit 7-segment display</i>)</li>
  <li>vtične žičke moški-moški (<i>angl. jumper wire male-to-male</i>)</li>
  <li>4 vtične žičke moški-ženska (<i>angl. jumper wire male-to-female</i>)</li>
</ul>
<h4>Programska oprema</h4>
<ul>
  <li>Python 3 (prednameščen na Raspbianu)</li>
  <li>Pythonov modul <code>gpiozero</code> (prednameščen na Raspbianu)</li>
  <li>Pythonov modul <code>pygame</code> (prednameščen na Raspbianu)</li>
  <li>Pythonov modul <code>random</code> (prednameščen na Raspbianu)</li>
  <li>Pythonov modul <code>RPi.GPIO</code> (prednameščen na Raspbianu), ki ga za delovanje potrebuje modul <code>tm1637</code></li>
  <li>Pythonov modul <code>time</code> (prednameščen na Raspbianu)</li>
  <li>Pythonov modul <code>tm1637</code> (datoteka modula <a href="py/tm1637.py">tm1637.py</a> biti mora v isti mapi kot datoteka s kodo, da modul lahko vključiš v svojo kodo)</li>
</ul>

<div class="panel panel-primary">
  <div class="panel-heading">Opomba</div>
  <div class="panel-body">
  <p align="justify">Primere uporabe modula <code>tm1637</code> si lahko ogledaš v datoteki <a href="py/test.py">test.py</a>.</p>
  </div>
</div>

</div>
</div>

<!-- Build tab -->
<div class="tab-pane" id="build">
<div style="height:450px">
<h4>Navodila</h4>
<ol>
  <li>Poveži Malinine GPIO nožice in preizkusno ploščico s pomočjo T-zatiča in kabla.</li>
  <li>Poveži rdečo LED diodo z nožico GND in nožico GPIO 18 (glej zavihek Vezje).</li>
  <li>Poveži modro LED diodo z nožico GND in nožico GPIO 4 (glej zavihek Vezje).</li>
  <li>Poveži oranžno LED diodo z nožico GND in nožico GPIO 22 (glej zavihek Vezje).</li>
  <li>Poveži zeleno LED diodo z nožico GND in nožico GPIO 23 (glej zavihek Vezje).</li>
  <li>Poveži vse gumbe z nožico GND in nožicami GPIO 13, GPIO 16, GPIO 19 in GPIO 20 (glej zavihek Vezje).</li>
  <li>Poveži nožico GND komponente z nožico GND na Malini (glej zavihek Vezje).</li>
  <li>Poveži nožico DIO komponente z nožico SDA na Malini (glej zavihek Vezje).</li>
  <li>Poveži nožico CLK komponente z nožico SCL na Malini (glej zavihek Vezje).</li>
  <li>Poveži nožico VCC komponente z nožico 3V3 na Malini (glej zavihek Vezje).</li>
  <li>Odpri IDLE in ustvari novo datoteko tako, da klikneš <b>File &gt; New file</b>.</li>
  <li>Shrani novo datoteko tako, da klikneš <b>File &gt; Save</b>. Datoteki daj ime <code>simon4.py</code>.</li>
  <li>V datoteko <code>simon4.py</code> vnesi kodo z zavihka Koda.</li>
  <li>Shrani kodo s <b>Ctrl+S</b> in jo nato zaženi s <b>F5</b>.</li>
  <li>Ko boš pognal(-a) program, bo prikazovalnik zaporedno prikazoval nivoje igre od 1 do 20 ter nato še ustrezni sporočili ob koncu igre (ali je igralec zmagal, ali je izgubil).</li>
</ol>
</div>
</div>

<!-- Board tab -->
<div class="tab-pane active" id="board">
<pre id="fritzing"><br /><img src="img/simon4_bb.png" border="0"></pre>
</div>

<!-- Schematics tab -->
<div class="tab-pane" id="scheme">
<pre id="fritzing"><br /><img src="img/simon4_sc.png" border="0"></pre>
</div>

<!-- Python tab -->
<div class="tab-pane" id="python">
<pre style="height:450px"><code class="language-python"># encoding: utf-8
import gpiozero
import random
import tm1637
import time
import pygame
pygame.init()


led = [
    gpiozero.LED(4),  # modra
    gpiozero.LED(18), # rdeča
    gpiozero.LED(22), # oranžna
    gpiozero.LED(23)  # zelena
]

start = gpiozero.Button(26) # gumb za začetek igre
gumb = [
    gpiozero.Button(13), # modra
    gpiozero.Button(16), # rdeča
    gpiozero.Button(19), # oranžna
    gpiozero.Button(20)  # zelena
]

zvok = [
    pygame.mixer.Sound('blue.ogg'),   # modra
    pygame.mixer.Sound('red.ogg'),    # rdeča
    pygame.mixer.Sound('orange.ogg'), # oranžna
    pygame.mixer.Sound('green.ogg')   # zelena
]

prikaz = tm1637.TM1637(3, 2)


zaporedje = []
nivo = 0


def predvajaj(i):
    led[i].on()
    zvok[i].play()
    time.sleep(1)
    led[i].off()

def konec_igre():
    prikaz.set_values(['b', 'u', 'u', 'u'])
    prikaz.set_doublepoint(False)
    time.sleep(3)
    prikaz.clear()
    raise SystemExit # nemudoma konča program

def nova_igra():
    zaporedje = []  # sprazni zaporedje lučk
    prikaz.clear()  # prikazovalni ne kaže nič

    # največ koliko nivojev mora igralec ponoviti,
    # da zmaga
    nivoji = 20
    for nivo in range(nivoji):
        time.sleep(1)
        nov_nivo()
        igralec_ponovi_nivo()

    # zmaga igralca
    prikaz.set_doublepoint(False)
    prikaz.set_values(['J', 'A', 'A', 'A'])
    time.sleep(3)
    prikaz.clear()
    

def nov_nivo():
    global nivo, prikaz
    nivo = nivo + 1
    # izpiši nivo
    D = nivo // 10 # desetice
    E = nivo % 10  # enice
    prikaz.set_values(['n', 'I', D, E])
    prikaz.set_doublepoint(True)
    # ustvari novo naključno lučko
    poteza = random.randint(0, 3)
    zaporedje.append(poteza)
    # prižigaj lučke in predvajaj zvoke v zaporedju
    for barva in zaporedje:
        led[barva].on()
        zvok[barva].play()
        time.sleep(1)
        led[barva].off()
        time.sleep(0.2)


def igralec_ponovi_nivo():
    poteza = 0
    while poteza < len(zaporedje):
        # za vsako potezo ima igralec na voljo
        # 5 sekund = 50 x 0.1 sekunde
        for korak in range(50):
            #print(korak)
            # modra
            if gumb[0].is_pressed:
                predvajaj(0)
                if zaporedje[poteza] != 0:
                    konec_igre()
                poteza = poteza + 1
                break
            # rdeča
            if gumb[1].is_pressed:
                predvajaj(1)
                if zaporedje[poteza] != 1:
                    konec_igre()
                poteza = poteza + 1
                break
            # oranžna
            if gumb[2].is_pressed:
                predvajaj(2)
                if zaporedje[poteza] != 2:
                    konec_igre()
                poteza = poteza + 1
                break
            # zelena
            if gumb[3].is_pressed:
                predvajaj(3)
                if zaporedje[poteza] != 3:
                    konec_igre()
                poteza = poteza + 1
                break
            time.sleep(0.1)


prikaz.clear()
while True:
    if start.is_pressed:
        nova_igra()
</code></pre>
<p><a href="py/simon4.py" class="btn btn-primary" target="_blank"><img src="../img/py16src.png"> Izvorna koda</a></p>
</div>
<!-- Right column end -->
                    </div>
                </div>
            </div>

        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

<!-- CookieCuttr -->
<script type="text/javascript" src="../cc/jquery.cookie.js"></script>
<script type="text/javascript" src="../cc/jquery.cookiecuttr.js"></script>
<link rel="stylesheet" href="../cc/cookiecuttr.css">
<script type="text/javascript" src="../cc/google-analytics.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    jQuery.cookieCuttr({
        cookieDeclineButton: true,
        cookieAnalyticsMessage: 'Spletišče za sledenje ogledov uporablja piškotke, vendar ne shranjujemo osebnih informacij.',
        cookieAcceptButtonText: 'Sprejmi',
        cookieDeclineButtonText: 'Zavrni',
        cookieWhatAreTheyLink: 'cookies.html',
        cookieWhatAreLinkText: 'Kaj so piškotki?',
        cookieNotificationLocationBottom: true
    });    
});
</script>

</body>
</html>
